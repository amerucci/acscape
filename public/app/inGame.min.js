let ingame_background=document.querySelector(".ingame_container_background");const roomModal=document.querySelector("#roomsModal"),friskModal=document.querySelector("#friskModal");let modal_title=document.querySelector(".modal-title");const penality=document.querySelector(".penality");let penality_info;function function_penality_info(){setTimeout(function(){penality_info.style.fontSize="1rem",penality_info.textContent="-30 sec pour avoir ouvert l'\xe9nigme "},200)}let navbar=document.querySelector(".navbar");function modalFixed(){let o=document.querySelector(".the_rooms"),n=document.querySelector(".frisk");o.addEventListener("click",function(){document.querySelector("#roomsModal").classList.add("show"),document.querySelector("#roomsModal").style.display="block"}),n.addEventListener("click",function(){document.querySelector("#friskModal").classList.add("show"),document.querySelector("#friskModal").style.display="block",document.querySelector("#friskModal").style.opacity="1"});let l=document.querySelectorAll(".close");l.forEach(o=>{o.addEventListener("click",function(){document.querySelector("#roomsModal").classList.remove("show"),document.querySelector("#roomsModal").style.display="none",document.querySelector("#friskModal").classList.remove("show"),document.querySelector("#friskModal").style.display="none"})})}window.innerWidth<992?(navbar.classList.add("flex-wrap"),navbar.classList.remove("navbar-expand-lg"),navbar.classList.add("navbar-expand")):(navbar.classList.remove("flex-wrap"),navbar.classList.remove("navbar-expand"),navbar.classList.add("navbar-expand-lg")),modalFixed();let countdown=3600;function updateCountdown(){let o=Math.floor(--countdown/60),n=countdown%60;if(o=o.toString().padStart(2,"0"),n=n.toString().padStart(2,"0"),(countdownElement=null!=document.getElementById("countdown"))&&(countdownElement=document.getElementById("countdown"),countdown<0)){let l=document.querySelector(".endgame_lose");l.classList.remove("dnone");return}countdownElement.innerHTML=o+":"+n}setInterval(updateCountdown,1e3);let interval=10,intervalId,roomsLock,furniture_modal;function intervalFunction(o){if(interval=10,intervalId&&clearInterval(intervalId),0===interval){o();return}intervalId=setInterval(function n(){((roomsLock=null!=document.querySelector("#roomsLock"))||(furniture_modal=null!=document.querySelector("#furniture_modal")))&&(penality_info.innerHTML="",interval--,clue_show2.classList.contains("dnone")?(penality_info.innerHTML="",clearInterval(intervalId),console.log(interval)):penality_info.innerHTML=`<iconify-icon class="moveLr mx-1"  icon="fluent-mdl2:chronos-logo"></iconify-icon><p class="m-0">${interval}s avant le prochain indice</p>`),0===interval&&(clearInterval(intervalId),penality_info.classList.add("fade"),penalityClue.innerHTML="",o())},1e3)}async function getData(){try{let o=await fetch("/ingame/data");if(o.ok){let n=await o.json();return dataGlobal=n.data}console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es :",o.statusText)}catch(l){console.error("Erreur lors du chargement des donn\xe9es :",l)}}async function main(){let o=await getData();console.log(o)}let dataGlobal=[],dataGlobalUnlock=[],penalityClue=document.querySelector(".penalityClue "),roomID=0,roomLockID=0,li_room;const roomsList=document.querySelector(".rooms_list"),navInGameTitle=document.querySelector(".room_active");let room_open,backdrop,modals=document.querySelectorAll(".modal"),input_container,switch_container,switch_try,checkTry,li_furniture,furnitureLi;const furnitureList=document.querySelector(".furniture_list"),frisk_btn=document.querySelector(".frisk_btn");let filteredFurniture=[],filteredFurnitureLength=0,filteredFurnitureChange=[],clue_show_content1,clue_show_content2,clue_show_content3,clue_btn_content,clue_show_container,roomsClue=[],roomsClueUnique=[],textarea_title_sticky,textareaSticky,copy,clueInterval,clue2Time,clue3Time,clue_show1,clue_show2,clue_show3;const uniqueIdsClue=new Set;let roomsClueId=[],createstickyOpac=document.querySelector("#createstickyOpac"),arrayMax=[],max=0,t,endgame_win=document.querySelector(".endgame_win"),buttonConfetti=document.querySelector(".buttonConfetti");function removeToptoBottom(){setTimeout(()=>{penality.classList.remove("topToBottom")},2e3)}function copyFurniture(o,n){createstickyOpac.click(),textarea_title_sticky=document.querySelectorAll(".textarea_title_sticky"),textareaSticky=document.querySelectorAll(".textareaSticky"),textarea_title_sticky[textarea_title_sticky.length-1].value=o,textareaSticky[textareaSticky.length-1].value=n}main().then(o=>{dataGlobal.room[0].padlock="no",dataGlobalUnlock.push(dataGlobal);for(let n=0;n<dataGlobal.room.length;n++){arrayMax.push(dataGlobal.room[n].n_room),max=Math.max(...arrayMax),(li_room=document.createElement("li")).classList.add("rooms_list_item",`nb-${n}`),roomsList.appendChild(li_room);let l=[];for(let a=3;a<roomsList.childNodes.length;a++)l.push(roomsList.childNodes[a]);l[n].style.backgroundImage=`url(/assets/pictures/rooms/${dataGlobalUnlock[0].room[n].picture})`,l[n].style.backgroundSize="contain",l[n].style.backgroundRepeat="no-repeat",l[n].style.backgroundPosition="center";let i=document.createElement("iconify-icon");i.setAttribute("icon","uis:padlock"),i.setAttribute("width","60"),i.setAttribute("height","60"),i.classList.add("padlock");let c=document.createElement("iconify-icon");function s(){"yes"==dataGlobal.room[n].padlock&&!1==l[n].classList.contains("room_unlock_open")?(l[n].style.color="grey",c.remove(),l[n].appendChild(i)):(l[n].style.color="black",i.remove(),l[n].appendChild(c))}c.setAttribute("icon","uil:unlock-alt"),c.setAttribute("width","60"),c.setAttribute("height","60"),c.classList.add("padlock_open"),s(),l[n].addEventListener("click",function(o){if(roomLockID=dataGlobal.room[n].id,s(),"no"==dataGlobalUnlock[0].room[n].padlock){roomModal.classList.remove("show"),ingame_background.style.backgroundImage=`url(/assets/pictures/rooms/${dataGlobalUnlock[0].room[n].picture})`,ingame_background.style.backgroundSize="30%, 30%",ingame_background.classList.add("ingame_background_responsive"),ingame_background.style.backgroundRepeat="no-repeat",ingame_background.style.backgroundPosition="center",ingame_background.style.backgroundImage?document.querySelector("body").style.backdropFilter="blur(5px)":document.querySelector("body").style.backdropFilter="none",navInGameTitle.innerHTML=dataGlobalUnlock[0].room[n].title;let a=document.querySelectorAll(".rooms_list_item");a.forEach(o=>{o.classList.remove("activeR")}),l[n].classList.add("activeR"),l[n].classList.add("room_unlock_open");let r=document.createElement("div");r.classList.add("modal","fade","modal-lg"),r.setAttribute("id","roomsOpen"),r.classList.add("room_open"),r.setAttribute("tabindex","-1"),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby","roomsModalOpenLabel"),r.setAttribute("aria-hidden","true"),r.innerHTML=`
                                                <div class="modal-dialog modal-dialog-centered" role="document">
                                                    <div class="modal-content modalRoomOpen">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title mx-auto d-flex align-items-center gap-3" id="roomsModalOpenLabel">${dataGlobalUnlock[0].room[n].title}</h5>
                                                            <button type="button" class="closeOpen" data-bs-dismiss="modal" aria-label="Close">
                                                                <span aria-hidden="true">
                                                                    <iconify-icon icon="akar-icons:cross" style="color: #d31e44;" width="35" height="35">
                                                                    </iconify-icon>
                                                                </span>
                                                        </div>
                                                            <div class="modal-body">
                                                                <div class="d-flex justify-content-center align-items-center gap-2 flex-column">
                                                                <h5 class="msg_open">Salle d\xe9v\xe9rouill\xe9e voyons ce qu'elle contient.</h5>
                                                                <p class="reward_container">${dataGlobal.room[n].reward}</p>
                                                                </div>
                                                            </div>
                                                    </div>
                                                </div>`,document.body.appendChild(r);let d=new bootstrap.Modal(r);d.show();let u=document.querySelector(".msg_open");"1"==dataGlobal.room[n].n_room&&(u.textContent=dataGlobal.room[n].description,document.querySelector(".reward_container").style="display: none"),l[n].classList.contains("activeR")&&roomID==roomID&&(roomID=dataGlobal.room[n].id,filteredFurnitureLength=(filteredFurniture=dataGlobalUnlock[0].furniture.filter(o=>o.room_id==roomID)).length),r.addEventListener("hidden.bs.modal",function(){r.remove(),roomModal.classList.add("show")})}if("yes"==dataGlobal.room[n].padlock&&!1==l[n].classList.contains("room_unlock_open")){roomModal.classList.remove("show");let m=document.createElement("div");m.classList.add("modal","fade","modal-lg"),m.setAttribute("id","roomsLock"),m.setAttribute("tabindex","-1"),m.setAttribute("role","dialog"),m.setAttribute("aria-labelledby","roomsModalLockLabel"),m.setAttribute("aria-hidden","true"),m.innerHTML=`
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content modalRoomLock">
                                    <div class="modal-header">
                                    
                                            <h5 class="modal-title mx-auto d-flex align-items-center gap-3" id="roomsModalLockLabel">${dataGlobalUnlock[0].room[n].title}</h5>
                                      
                                        <button type="button" class="closeLock" data-bs-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">
                                                <iconify-icon icon="akar-icons:cross" style="color: #d31e44;" width="35" height="35">
                                                </iconify-icon>
                                            </span>
                                    </div>
                                    <div class="d-flex  clue_show desc_container fade show w-100 gap-1">
                                    <img src="/assets/pictures/rooms/${dataGlobal.room[n].picture}" class="img_room" alt="" width="373" height="100%">
                                    <p class="description_room">${dataGlobal.room[n].description}</p>
                                    </div>
                                        <div class="modal-body d-flex flex-column flex-md-row w-100">
                        
                                                <div class="d-flex flex-column clue_show input_container fade show w-50 gap-1">
                                                    <div class="w-100">
                                                      <div class="d-flex">
                                                          <input type="text" class="form-control w-100" id="rooms_unlock_key" placeholder="Entrer la cl\xe9 pour ${dataGlobal.room[n].title}">
                                                          <button type="button" class="btn btn-primary btn-lg btn-block" id="rooms_unlock_btn"><iconify-icon class="key_btn white" icon="fluent-emoji-high-contrast:old-key"></iconify-icon></button>
                                                          </div>
                                                          <div class="d-flex align-items-center gap-5"></div>
                                                    </div>
                                                        <div class="d-flex flex-column switch_container fade show">
                                                            <div class="progress w-100 h-100">
                                                                <div class=" text-center progress-bar progress-bar-striped progress-bar-animated room_control_key" role="progressbar" aria-label="Animated striped" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
                                                            </div>
                                                            <p class="text-center penality_info my-2"></p>
                                                        </div>
                                               
                                            </div>

                                            <p class="reward dnone w-75 d-flex justify-content-center align-items-center"></p>
                                              <div id="clue_btn_content" class="d-flex flex-column w-50 align-items-center clue_container gap-2">
                                                  <div class="d-flex justify-content-center w-100 gap-1 ">
                                                      <div >
                                                      <p class="text-center voidClueTime dnone m-0"></p>
                                                      <button class="clue_show1 my-2 px-2" >Indice 1</button> 
                                                      </div>
                                                      <div>
                                                      <p class="text-center Clue2Time dnone m-0"></p>
                                                      <button id="timelaps" class="clue_show2 my-2 px-2" data-bs-toggle="tooltip" data-bs-placement="top" title="30s apr\xe8s la d\xe9couverte du 1er indice">indice 2</button>
                                                      </div>
                                                      <div>
                                                        <p class="text-center Clue3Time dnone m-0"></p>
                                                      <button class="clue_show3 my-2 px-2" data-bs-toggle="tooltip" data-bs-placement="top" title="30s apr\xe8s la d\xe9couverte du 2nd indice">indice 3</button>
                                                      </div>
                                                  </div>
                                                  <div class="d-flex gap-2 justify-content-center align-items-center mx-auto h-100 w-100">
                                                  <div class="clue_show1_content dnone d-flex justify-content-center align-items-center w-100 h-75 mx-2">
                                                      <p class="d-flex justify-content-center align-items-center w-100 h-75 mx-2"></p>
                                                      
                                                  </div>
                                                  <div class="clue_show2_content dnone d-flex justify-content-center align-items-center w-100 h-75 mx-2">
                                                      <p class="d-flex justify-content-center align-items-center w-100 h-75 mx-2"></p>
                                                    
                                                  </div>
                                                  <div class="clue_show3_content dnone d-flex justify-content-center align-items-center w-100 h-75 mx-2">
                                                      <p class=" d-flex justify-content-center align-items-center w-100 h-75 mx-2"></p>
                                                     
                                                  </div>
                                                 </div>
                                              </div>
                                              
                                        </div>       
                                        </div>
                                </div>
                            </div>`,document.body.appendChild(m);let y=new bootstrap.Modal(m);y.show(),m.addEventListener("hidden.bs.modal",function(o){m.remove(),roomModal.classList.add("show"),penalityClue.innerHTML="",clearInterval(intervalId)});let p=document.querySelector(" .desc_container>img");p.addEventListener("click",function(){p.classList.toggle("zoom")});var f=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(o){return new bootstrap.Tooltip(o)});clue_btn_content=document.querySelector("#clue_btn_content"),switch_container=document.querySelector(".switch_container"),input_container=document.querySelector(".input_container"),(clue_show1=document.querySelector(".clue_show1")).setAttribute("data_id",`${dataGlobal.room[n].id}`),clue_show_content1=document.querySelector(".clue_show1_content"),(clue_show2=document.querySelector(".clue_show2")).setAttribute("data_id",`${dataGlobal.room[n].id}`),clue_show_content2=document.querySelector(".clue_show2_content"),clue2Time=document.querySelector(".Clue2Time"),(clue_show3=document.querySelector(".clue_show3")).setAttribute("data_id",`${dataGlobal.room[n].id}`),clue_show_content3=document.querySelector(".clue_show3_content"),clue3Time=document.querySelector(".Clue3Time"),roomsClueId=[...uniqueIdsClue],"null"==clue_show_content1.innerHTML&&(clue_show1.classList.add("dnone"),clue_show2.classList.add("dnone"),clue_show3.classList.add("dnone")),(clue_show_content2.innerHTML=null==dataGlobal.room[n].clue2)&&(clue_show2.classList.add("dnone"),clue_show3.classList.add("dnone")),(clue_show_content3.innerHTML=null==dataGlobal.room[n].clue3)&&clue_show3.classList.add("dnone"),"yes"==dataGlobalUnlock[0].room[n].clue1Found&&(f[0].hide(),f[0].disable()),"yes"==dataGlobalUnlock[0].room[n].clue2Found&&(f[1].hide(),f[1].disable()),t=0,clue_show1.addEventListener("click",function(){return clue_show_content1.classList.toggle("dnone"),this.classList.toggle("rotate_5deg"),clue_show_content2.classList.add("dnone"),clue_show2.classList.remove("rotate_5deg"),clue_show_content3.classList.add("dnone"),clue_show3.classList.remove("rotate_5deg"),clue_show_content1.innerHTML=`<p class="m-0">${dataGlobal.room[n].clue}</p><iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon></button>`,0!=t||dataGlobalUnlock[0].room[n].clue1penality||(dataGlobalUnlock[0].room[n].clue1penality="yes",t++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",penality_info.textContent="",penality_info.classList.remove("fade"),function_penality_info(),countdown-=30,removeToptoBottom()),dataGlobalUnlock[0].room[n].clue1Found||intervalFunction(function(){dataGlobalUnlock[0].room[n].clue1Found="yes",f[0].hide(),f[0].disable(),interval=10}),(copy=document.querySelectorAll(".copy")).forEach(o=>{o.addEventListener("click",function(){createstickyOpac.click(),textarea_title_sticky=document.querySelectorAll(".textarea_title_sticky"),textareaSticky=document.querySelectorAll(".textareaSticky"),textarea_title_sticky[textarea_title_sticky.length-1].value=`${dataGlobal.room[n].title}`,textareaSticky[textareaSticky.length-1].value=`indice n\xb01 
${dataGlobal.room[n].clue}`})}),dataGlobalUnlock}),clue_show2.addEventListener("click",function(){"yes"==dataGlobalUnlock[0].room[n].clue1Found&&(f[0].hide(),f[0].disable()),1!=t||dataGlobalUnlock[0].room[n].clue2penality||(dataGlobalUnlock[0].room[n].clue2penality="yes",t++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",penality_info.textContent="",penality_info.classList.remove("fade"),function_penality_info(),countdown-=30,removeToptoBottom()),"yes"==dataGlobalUnlock[0].room[n].clue1Found&&(clue_show2.disabled=!1,clue_show_content2.classList.toggle("dnone"),this.classList.toggle("rotate_5deg"),clue_show1.classList.remove("rotate_5deg"),clue_show_content1.classList.add("dnone"),clue_show3.classList.remove("rotate_5deg"),clue_show_content3.classList.add("dnone"),clue_show_content2.innerHTML=`<p class="m-0">${dataGlobal.room[n].clue2}</p><iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon></button>`,dataGlobalUnlock[0].room[n].clue2Found||(1==t&&(t++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",countdown-=30,removeToptoBottom(),f[1].hide(),f[1].disable()),intervalFunction(function(){dataGlobalUnlock[0].room[n].clue2Found="yes",f[1].hide(),f[1].disable(),interval=10})),(copy=document.querySelectorAll(".copy")).forEach(o=>{o.addEventListener("click",function(){createstickyOpac.click(),textarea_title_sticky=document.querySelectorAll(".textarea_title_sticky"),textareaSticky=document.querySelectorAll(".textareaSticky"),textarea_title_sticky[textarea_title_sticky.length-1].value=`${dataGlobal.room[n].title}`,textareaSticky[textareaSticky.length-1].value=`indice n\xb02 
${dataGlobal.room[n].clue2}`})}))}),clue_show3.addEventListener("click",function(){dataGlobalUnlock[0].room[n].clue3Found,"yes"==dataGlobalUnlock[0].room[n].clue2Found&&(clue_show_content3.classList.toggle("dnone"),this.classList.toggle("rotate_5deg"),clue_show_content1.classList.add("dnone"),clue_show1.classList.remove("rotate_5deg"),clue_show_content2.classList.add("dnone"),clue_show2.classList.remove("rotate_5deg"),clue_show_content3.innerHTML=`<p class="m-0">${dataGlobal.room[n].clue3}</p><iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon></button>`,2!=t||dataGlobalUnlock[0].room[n].clue3penality||(dataGlobalUnlock[0].room[n].clue3penality="yes",t++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",countdown-=30,penality_info.textContent="",penality_info.classList.remove("fade"),function_penality_info(),removeToptoBottom(),f[1].hide(),f[1].disable()),(copy=document.querySelectorAll(".copy")).forEach(o=>{o.addEventListener("click",function(){createstickyOpac.click(),textarea_title_sticky=document.querySelectorAll(".textarea_title_sticky"),textareaSticky=document.querySelectorAll(".textareaSticky"),textarea_title_sticky[textarea_title_sticky.length-1].value=`${dataGlobal.room[n].title}`,textareaSticky[textareaSticky.length-1].value=`indice n\xb03 
${dataGlobal.room[n].clue3}`})}))}),document.getElementById("roomsModalLockLabel");let b=document.querySelector("#rooms_unlock_key"),h=document.querySelector(".room_control_key"),v=document.querySelector("#rooms_unlock_btn"),k=document.querySelector(".reward"),L=document.querySelector(".progress-bar"),$=3;backdrop=document.querySelector(".closeLock"),penality_info=document.querySelector(".penality_info"),h.innerHTML=`<span class="h-100 d-flex justify-content-center align-items-center tryNumber">${$}</span>`,v.addEventListener("click",function(){""==b.value&&e.preventDefault,b.value==dataGlobal.room[n].unlock_word?(v.disabled=!0,k.innerHTML=`${dataGlobal.room[n].reward}`,dataGlobal.room[n].padlock="no",l[n].classList.add("room_unlock_open"),l[n].style.color="black",i.remove(),c.remove(),l[n].appendChild(c),dataGlobalUnlock.push(dataGlobal),dataGlobalUnlock.length>1&&dataGlobalUnlock.pop(),backdrop.click(),l[n].click()):($--,L.style.width=`${$/3*100}%`,b.value="",h.innerHTML=`<span class="h-100 d-flex justify-content-center align-items-center tryNumber">${$}</span>`,0==$&&(penality_info.innerHTML='<span class="d-flex align-items-center justify-content-center endTry gap-3"><iconify-icon class="moveLr" icon="fluent-mdl2:chronos-logo"></iconify-icon><p class="m-0">-5min</p></span>',setTimeout(function(){$=3,L.style.width=`${$/3*100}%`,h.innerHTML=`<span class="m-0">${$}</span>`,penality_info.innerHTML=""},2e3),penality.classList.add("topToBottom"),penality.innerHTML="-5 min",countdown-=300,removeToptoBottom()))}),document.addEventListener("keydown",function(o){if("Enter"==o.key){if(b.value==dataGlobal.room[n].unlock_word){v.click(),o.preventDefault;return}if(""==b.value){o.preventDefault;return}v.click(),o.preventDefault;return}})}dataGlobal.room[n].n_room==max&&l[n].classList.contains("room_unlock_open")&&(endgame_win.classList.remove("dnone"),setInterval(function(){buttonConfetti.click()},200))})}frisk_btn.addEventListener("click",function(){furnitureList.innerHTML="",dataGlobal.furniture.forEach(o=>{if(o.room_id===roomID){(furnitureLi=document.createElement("li")).classList.add("furniture_list_item");let n=o.title;n.length>10&&(n=n.substring(0,10)+"..."),furnitureLi.setAttribute("data-id",o.id),furnitureLi.innerHTML=`<button class="m-0 actionFurniture">${o.action}</button>${n}`,furnitureList.appendChild(furnitureLi);let l=document.createElement("iconify-icon");l.setAttribute("icon","uis:padlock"),l.setAttribute("width","60"),l.setAttribute("height","60"),l.classList.add("padlock");let a=document.createElement("iconify-icon");a.setAttribute("icon","uil:unlock-alt"),a.setAttribute("width","60"),a.setAttribute("height","60"),a.classList.add("padlock_open"),"yes"==o.padlock?(furnitureLi.style.color="grey",furnitureLi.appendChild(l)):(furnitureLi.style.color="black",l.remove(),furnitureLi.appendChild(a)),furnitureList.appendChild(furnitureLi),"yes"!=o.padlock||furnitureLi.classList.contains("furniture_unlock")||furnitureLi.addEventListener("click",function(n){friskModal.classList.remove("show");let l=document.createElement("div");l.classList.add("modal","fade","modal-lg"),l.setAttribute("id","furniture_modal"),l.setAttribute("tabindex","-1"),l.setAttribute("aria-labelledby","furniture_modal_label"),l.setAttribute("aria-hidden","true"),l.innerHTML=`<div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content furnitureLock">
                                <div class="modal-header">
        
                                        <h5 class="modal-title mx-auto d-flex align-items-center gap-3" id="furnitureModalLockLabel">${o.title}</h5>
        
                                    <button type="button" class="closeLock" data-bs-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">
                                            <iconify-icon icon="akar-icons:cross" style="color: #d31e44;" width="35" height="35">
                                            </iconify-icon>
                                        </span>
                                </div>
                                 <div class="d-flex  clue_show desc_container fade show w-100 gap-1">
                                 <img src="/assets/pictures/furnitures/${o.picture}" class="img_furniture" alt="" width="373" height="100%">
                                     <p class="description_room">${o.description}</p>
                                 </div>
                                    <div class="modal-body d-flex flex-column flex-md-row">
        
                                        <div class="d-flex flex-column clue_show w-50 gap-1 input_container ">
                                          <div class="w-100">
                                              <div class="d-flex">
                                                  <input type="text" class="form-control w-100" id="furniture_key_unlock" placeholder="Entrer la cl\xe9 pour ${o.title}">
                                                  <button type="button" class="btn btn-primary btn-lg btn-block" id="furniture_key_unlock_btn"><iconify-icon class="key_btn white" icon="fluent-emoji-high-contrast:old-key"></iconify-icon></button>
                                                  </div>
                                                  <div class="d-flex align-items-center gap-5"></div>
                                              <p class="furniture_reward dnone"></p>
                                          </div>    
                                          <div class="d-flex flex-column switch_container fade show">
                                          <div class="progress w-100 h-100">
                                              <div class="text-center progress-bar progress-bar-striped progress-bar-animated furniture_unlock_statut" role="progressbar" aria-label="Animated striped example" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
                                          </div>
                                          <p class="text-center penality_info mt-2"></p>
                                      </div>
                                        </div>
                                          <div class="d-flex flex-column w-50 align-items-center gap-3 clue_container">
                                              <div class="d-flex gap-3 justify-content-center w-100">
                                                  <button class="clue_show1 my-2 px-2" >Indice 1</button> 
                                                  <button id="timelaps" class="clue_show2 my-2 px-2" data-bs-toggle="tooltip" data-bs-placement="top" title="30s apr\xe8s la d\xe9couverte du 1er indice">indice 2</button>
                                                  <button class="clue_show3 my-2 px-2" data-bs-toggle="tooltip" data-bs-placement="top" title="30s apr\xe8s la d\xe9couverte du 2nd indice">indice 3</button>
                                              </div>
                                              <div class="d-flex gap-2 justify-content-center align-items-center mx-auto h-100 w-100">
                                              <div class="clue_show1_content dnone d-flex justify-content-center align-items-center w-100 h-75 mx-2">
                                                      <p class="d-flex justify-content-center align-items-center w-100 h-75 mx-2"></p>
                                                      
                                                  </div>
                                                  <div class="clue_show2_content dnone d-flex justify-content-center align-items-center w-100 h-75 mx-2">
                                                      <p class="d-flex justify-content-center align-items-center w-100 h-75 mx-2"></p>
                                                    
                                                  </div>
                                                  <div class="clue_show3_content dnone d-flex justify-content-center align-items-center w-100 h-75 mx-2">
                                                      <p class=" d-flex justify-content-center align-items-center w-100 h-75 mx-2"></p>
                                                     
                                                  </div>
                                              </div>
                                          </div>
                                    </div>  `,document.body.appendChild(l);let a=new bootstrap.Modal(l);a.show(),l.addEventListener("hidden.bs.modal",function(){l.remove(),friskModal.classList.add("show"),penalityClue.innerHTML="",clearInterval(intervalId)});let i=document.querySelector(" .img_furniture");i.addEventListener("click",function(){this.classList.toggle("zoom")});let c=document.getElementById("furnitureModalLockLabel");switch_try=document.querySelector(".switch_try"),checkTry=document.querySelector(".check_try");let s=0;document.querySelector("#clue_btn_content");var r=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(o){return new bootstrap.Tooltip(o)});(clue_show1=document.querySelector(".clue_show1")).setAttribute("data_id",`${o.id}`),clue_show_content1=document.querySelector(".clue_show1_content"),(clue_show2=document.querySelector(".clue_show2")).setAttribute("data_id",`${o.id}`),clue_show_content2=document.querySelector(".clue_show2_content"),(clue_show3=document.querySelector(".clue_show3")).setAttribute("data_id",`${o.id}`),clue_show_content3=document.querySelector(".clue_show3_content"),"null"==clue_show_content1.innerHTML&&(clue_show1.classList.add("dnone"),clue_show2.classList.add("dnone"),clue_show3.classList.add("dnone")),(clue_show_content2.innerHTML=null==o.clue2)&&(clue_show2.classList.add("dnone"),clue_show3.classList.add("dnone")),(clue_show_content3.innerHTML=null==o.clue3)&&clue_show3.classList.add("dnone"),"yes"==o.clue1Found&&(r[0].hide(),r[0].disable()),"yes"==o.clue2Found&&(r[1].hide(),r[1].disable()),s=0,clue_show1.addEventListener("click",function(){clue_show_content1.classList.toggle("dnone"),this.classList.toggle("rotate_5deg"),clue_show_content2.classList.add("dnone"),clue_show2.classList.remove("rotate_5deg"),clue_show_content3.classList.add("dnone"),clue_show3.classList.remove("rotate_5deg"),clue_show_content1.innerHTML=`<p class="m-0">${o.clue}</p><iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon></button>`,0!=s||o.clue1penality||(o.clue1penality="yes",s++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",penality_info.classList.remove("fade"),penality_info.textContent="Vous avez ouvert un indice",function_penality_info(),countdown-=30,removeToptoBottom()),o.clue1Found||intervalFunction(function(){o.clue1Found="yes",r[0].hide(),r[0].disable(),interval=10}),(copy=document.querySelectorAll(".copy")).forEach(n=>{n.addEventListener("click",function(){console.log("copy");let n=`indice 1: ${o.clue}`;copyFurniture(o.title,n)})})}),clue_show2.addEventListener("click",function(){console.log("clue_show2 1ok"),"yes"==o.clue1Found&&(clue_show2.disabled=!1,r[0].hide(),r[0].disable()),1!=s||o.clue2penality||(o.clue2penality="yes",s++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",penality_info.classList.remove("fade"),function_penality_info(),countdown-=30,removeToptoBottom()),"yes"==o.clue1Found&&(clue_show2.disabled=!1,console.log("clue_show2 2ok"),clue_show_content2.classList.toggle("dnone"),this.classList.toggle("rotate_5deg"),clue_show1.classList.remove("rotate_5deg"),clue_show_content1.classList.add("dnone"),clue_show3.classList.remove("rotate_5deg"),clue_show_content3.classList.add("dnone"),clue_show_content2.innerHTML=`<p class="m-0">${o.clue2}</p><iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon></button>`,o.clue2Found||(1==s&&(s++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",countdown-=30,removeToptoBottom(),r[1].hide(),r[1].disable()),intervalFunction(function(){o.clue2Found="yes",r[1].hide(),r[1].disable(),interval=10})),(copy=document.querySelectorAll(".copy")).forEach(n=>{n.addEventListener("click",function(){console.log("copy");let n=`indice 2: ${o.clue2}`;copyFurniture(o.title,n)})}))}),clue_show3.addEventListener("click",function(){o.clue3Found,"yes"==o.clue2Found&&(clue_show_content3.classList.toggle("dnone"),this.classList.toggle("rotate_5deg"),clue_show_content1.classList.add("dnone"),clue_show1.classList.remove("rotate_5deg"),clue_show_content2.classList.add("dnone"),clue_show2.classList.remove("rotate_5deg"),clue_show_content3.innerHTML=`<p class="m-0">${o.clue3}</p><iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon></button>`,2!=s||o.clue3penality||(o.clue3penality="yes",s++,penality.classList.add("topToBottom"),penality.textContent="-30 sec",countdown-=30,removeToptoBottom(),r[1].hide(),r[1].disable()),(copy=document.querySelectorAll(".copy")).forEach(n=>{n.addEventListener("click",function(){console.log("copy");let n=`indice 3: ${o.clue3}`;copyFurniture(o.title,n)})}))});let d=document.querySelector("#furniture_key_unlock"),u=document.querySelector("#furniture_key_unlock_btn"),m=document.querySelector(".furniture_reward"),y=document.querySelector(".furniture_unlock_statut"),p=3;y.innerHTML=`<span class="h-100 d-flex justify-content-center align-items-center tryNumber">${p}</span>`;let f=document.querySelector(".progress-bar");penality_info=document.querySelector(".penality_info"),backdrop=document.querySelector(".closeLock"),u.addEventListener("click",function(){if(""==d.value&&e.preventDefault,d.value==o.unlock_word){u.disabled=!0,o.padlock="no",y.innerHTML='<span>bravo</span><iconify-icon icon="uil:unlock-alt" width="60" height="60"></iconify-icon>',m.innerHTML=o.reward,(""==m.innerHTML||null==m.innerHTML)&&(m.innerHTML="Vous avez trouv\xe9 le bon code, mais il n'y s'y trouve rien"),c.innerHTML=`${o.title} <iconify-icon icon="uil:unlock-alt" width="60" height="60"></iconify-icon>`,dataGlobalUnlock.push(dataGlobal),dataGlobalUnlock.length>1&&dataGlobalUnlock.pop(),backdrop.click();document.querySelector(".close").click(),frisk_btn.click(),furnitureLi.classList.add("furniture_unlock");let n=document.createElement("div");n.classList.add("modal","fade"),n.id="modalF_open",n.setAttribute("tabindex","-1"),n.setAttribute("aria-labelledby","modalF_open"),n.setAttribute("aria-hidden","false"),n.innerHTML=`
                                                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                                    <div class="modal-content modalFurnitureOpen">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="modalF_open">${o.title}</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            <iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon>  
                                                        </div>
                                                        <div class="modal-body">
                                                            <p class="furniture_reward  reward_container">${o.reward}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                `,document.body.appendChild(n);let l=new bootstrap.Modal(n);l.show(),(copy=document.querySelectorAll(".copy")).forEach(n=>{n.addEventListener("click",function(){copyFurniture(o.title,o.reward)})}),n.addEventListener("hidden.bs.modal",function(){n.remove()})}else p--,f.style.width=`${p/3*100}%`,d.value="",y.innerHTML=`<span class="h-100 d-flex justify-content-center align-items-center tryNumber">${p}</span>`,0==p&&(penality_info.innerHTML='<span class="d-flex align-items-center justify-content-center endTry gap-3"><iconify-icon class="moveLr"  icon="fluent-mdl2:chronos-logo"></iconify-icon><p class="m-0">-5min</p></span>',setTimeout(function(){p=3,f.style.width=`${p/3*100}%`,y.innerHTML=`<span class="h-100 d-flex justify-content-center align-items-center tryNumber">${p}</span>`,penality_info.innerHTML=""},2e3),penality.classList.add("topToBottom"),penality.innerHTML="-5 min",p=3,countdown-=300,removeToptoBottom())}),document.addEventListener("keydown",function(n){if("Enter"==n.key){if(d.value==o.unlock_word){u.click(),n.preventDefault;return}if(""==d.value){n.preventDefault;return}u.click(),n.preventDefault;return}})}),"no"==o.padlock&&(furnitureLi.classList.add("furniture_unlock"),furnitureLi.addEventListener("click",function(n){let l=document.createElement("div");l.classList.add("modal","fade"),l.id="modalF_open",l.setAttribute("tabindex","-1"),l.setAttribute("aria-labelledby","modalF_open"),l.setAttribute("aria-hidden","false"),l.setAttribute("data-bs-backdrop","true"),l.setAttribute("pointer-events","auto"),l.innerHTML=`
                                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                    <div class="modal-content modalFurnitureOpen">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="modalF_open">${o.title}</h5>
                                            <iconify-icon class="copy" icon="clarity:copy-to-clipboard-line"></iconify-icon>  
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                                                            
                                        <div class="modal-body">
                                            <p class='furniture_reward reward_container'>${o.reward}</p>     
                                        </div>
                                    </div>
                                </div>
                                `,document.body.appendChild(l);let a=new bootstrap.Modal(l);a.show(),l.addEventListener("hidden.bs.modal",function(){l.remove()}),(copy=document.querySelectorAll(".copy")).forEach(n=>{n.addEventListener("click",function(){console.log("copy"),copyFurniture(o.title,o.reward)})})}))}}),0==furnitureList.childElementCount&&(furnitureList.innerHTML="<p>Aucun meuble \xe0 fouiller</p>"),0==roomID&&(furnitureList.innerHTML="<p>Veuillez s\xe9lectionner une salle</p>")})}).catch(o=>{console.error(o)});const wiki=document.querySelector(".wiki");wiki.addEventListener("click",function(){let o=document.createElement("div");o.classList.add("modal","fade"),o.id="wikiModal",o.setAttribute("tabindex","-1"),o.setAttribute("aria-labelledby","wikiModal"),o.setAttribute("aria-hidden","false"),o.setAttribute("pointer-events","auto"),o.innerHTML=`
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="wikiModal">Wiki</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body wiki_modal">
               <iframe src="https://fr.m.wikipedia.org" width="100%" height="100%"></iframe>
            </div>
        </div>
    </div>
    `,document.body.appendChild(o);let n=new bootstrap.Modal(o);n.show(),o.addEventListener("hidden.bs.modal",function(){o.remove()})}),document.addEventListener("DOMContentLoaded",()=>{let o=document.querySelector("#stickies-container"),n=document.querySelector("#createstickyOpac"),l=document.querySelector("#createDraw");!1==!document.querySelector(".textareaSticky")&&document.querySelector(".textareaSticky").addEventListener("click",function(){console.log("click")});let a=document.querySelector("#stickytitle"),i=document.querySelector("#stickytext"),c=o=>{o.target.parentNode.remove()},s=o=>{o.target.parentNode.remove()},r=!1,d,u=0,m=0;function y(o){r&&(d.style.left=o.clientX-u+"px",d.style.top=o.clientY-m+"px")}function p(){let n=document.createElement("div");if(n.classList.add("drag","sticky"),n.innerHTML='<textarea class="textarea_title_sticky w-100" maxlength="18" placeholder="Titre"></textarea><span class="dashedLine"></span><textarea class="w-100 textareaSticky" placeholder="contenue" cols="24" rows="8"></textarea><canvas class="drawing-canvas dnone mx-auto"></canvas><span class="deletesticky">&times;</span>',n.style.backgroundColor=L(),o.append(n),k(n),document.querySelectorAll(".sticky").length>0){let l=document.querySelectorAll(".textarea_title_sticky");l.forEach(o=>{o.addEventListener("keydown",o=>{13===o.keyCode&&o.preventDefault()})})}$(),b()}function f(){let n=document.createElement("div"),l=document.createElement("span"),a=document.createElement("span");a.classList.add("rubber_btn"),a.innerHTML='<iconify-icon icon="jam:rubber"></iconify-icon>',l.innerHTML="&times",l.classList.add("canva_delete"),n.classList.add("canvas_container","drag");let i=document.createElement("canvas");i.classList.add("drawing-canvas"),n.appendChild(i),n.appendChild(l),n.appendChild(a),o.append(n),v(i);let c=i.getContext("2d"),s=!1,r=0,d=0;i.addEventListener("mousedown",o=>{s=!0,[r,d]=[o.offsetX,o.offsetY]}),i.addEventListener("mouseup",()=>s=!1),i.addEventListener("mousemove",o=>{s&&(c.beginPath(),c.moveTo(r,d),c.lineTo(o.offsetX,o.offsetY),c.stroke(),[r,d]=[o.offsetX,o.offsetY])}),w(),g()}function b(){a.value="",i.value=""}function h(){ctx.clearRect()}function v(){let o=document.querySelector(".drawing-canvas");o.style.left=window.innerWidth/2-o.clientWidth/2+"px",o.style.top=o.clientHeight/2+"px"}function k(o){o.style.left=0+Math.round(50*Math.random())+"px",o.style.top=o.clientHeight/2+(0+Math.round(50*Math.random()))+"px"}function L(){return"rgb("+(200+Math.floor(56*Math.random()))+","+(200+Math.floor(56*Math.random()))+","+(200+Math.floor(56*Math.random()))+")"}function $(){document.querySelectorAll(".deletesticky").forEach(o=>{o.removeEventListener("click",c,!1),o.addEventListener("click",c)})}function w(){document.querySelectorAll(".canva_delete").forEach(o=>{o.removeEventListener("click",s,!1),o.addEventListener("click",s)})}function g(){document.querySelectorAll(".rubber_btn").forEach(o=>{o.removeEventListener("click",h,!1),o.addEventListener("click",function(){console.log("ok")})})}window.addEventListener("mousedown",o=>{o.target.classList.contains("drag")&&((d=o.target).parentNode.append(d),u=o.offsetX,m=o.offsetY,r=!0)}),window.addEventListener("mousemove",y),window.addEventListener("mouseup",()=>r=!1),n.addEventListener("click",p),l.addEventListener("click",f),$(),w(),g()});const toolBox_btn=document.querySelector("#toolBox_btn"),toolbox_content=document.querySelector("#toolbox_content"),espaceVoid=document.querySelector("#espaceVoid");toolBox_btn.addEventListener("click",()=>{espaceVoid.classList.toggle("dnone"),toolbox_content.classList.toggle("dnone")}),party.confetti(runButton,{count:party.variation.range(200,400),spread:party.variation.range(200,400),zindex:999999999999});